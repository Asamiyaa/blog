 场景：bbsp系统使用使用原生的jsp+javaScript+dwr+ssh+db2搭建系统
 系统优势：系统业务较复杂，其中service中对多个对象约束进行控制 ; 系统内部集成emu ; 更多原生代码逻辑对js /baseDao /Page等类进行封装.... ；
          多个工具类，校验，转换类实现 ；事务配置 ； 日志系统 ；异常系统 .....
 目的：对基础学习，减少在做项目中走弯路。
 时间：2018-09-01  08：59
 
 --------------hibernate---------------------------------
 以下内容来自对http://edu.51cto.com/course/10747.html?source=so视频学习摘录
 1.是什么
        orm框架  对jdbc封装 完全面向对象(提供处理sql的方法)  银行这种业务为主的系统一定以关系型树据库 - hibernate对象 - 封装多个条件而不是直接写sql，
                 也便于业务逻辑的实现。而互联网公司业务逻辑没那么复杂，数据库也是以非关系型为主，注重性能。。
        映射关系：表 ==  类(反向工程生成 生成对应的xxx.hbm.xml文件和xxx.java entity)
                记录 == 对象
                字段 == 属性
 2.如何做
       1.对比mybatis
              1.添加mybatis。jar  mysql-java-x.jar
              2.添加config.dtd 和 mapper.dtd约束文件   约束配置文件的规范(系统会检测)  /  书写提示  <==创建配置文件时，每个配置文件的头信息注意
              3.在config配置文件中配置数据源，运行时环境变量，映射文件路径
                  mapper配置文件中配置sql语句和映射关系
                  
              1.添加hibernate.jar mysql-java-x.jar  添加源码  extend foler -->选择project - xxx core - java 止
              2.dtd文件添加 。
                   dtd和xsd对比：https://blog.csdn.net/z69183787/article/details/38563457
              3.hibernate.hbm.xml和 mapper.hbm.xml配置映射关系    
              4.创建对应的映射类
              注意：mapper.xml和映射类可以通过反向工程获取  <=先设计表
              5.configuration - sessionFactoty - session - tansaction - save() -close  
                         {后期无需关闭手动关闭session 由容器spring管理}
                         {解决同一线程使用同一session ，使用了threadLocal}
        2.session 和 HibernateTemple关系 
        3.hibernate三种对象状态
              1.瞬时状态  translent       数据库中没有对应记录，不受session管理
              2.游离状态  detached        数据库中有对应记录(只看主键有没有 不管其他值是否一致)，不受session管理
              3.持久状态  persistent      数据库中有对应记录，受session管理
             
             **有对应记录：在树据库中能找到主键id对应的数据
             **受session管理：由session查询出或作为参数交由session管理的对象
               
               User user = new User(null , "ywj" , 22);   瞬时    无主键
               ....
               session.save(user);                        持久    生成主键 保持和数据库数据一致   自动  mybatis需要配置
               .... 
               session.close();                           游离
        
         4.脏对象 脏检查  保持数据一致性
              脏对象：在hibernate中对象状态签后发生改变
              脏检查：判断是否为脏对象的时机：当提交事务或刷新缓存时，hibernate对session中持久状态对象检查。如果发生改变则将数据与数据库同步
              
              问题：bbsp项目中对脏读的处理？
        
         5.session API
               save()
             ** delete()    必须已知主键  也只根据主键   其他属性不会影响删除操作 其他属性传不传无意义  主键不存在 报错
               get()  load()  load()只能根据id ，且为懒加载
             ** update()    1必须已知主键   主键new User(1，“xin”,"xin") ;
                            2.当使用new User() user.setId(1) ;user.setName("xin") - update会重新载入数据，将id=1原有数据统一覆盖插入新的
                                 1.load() -> setName() -》update   对象对应属性的都在
                                 2.动态dml语句   在mapper文件中定义dynamic-update="false"  dynamic-insert="false"
                                   实现只插入非空的   只更新不为null的(对象必须时持久对象)
                saveOrUpdate()  如果对象id为null执行save(),如果不为null则执行update()       
            问题：前台传入一个非id数据，如何进行del和up操作？
                  ？？？？？先查？查也是不准确的呀？?????? 《 ---读取数据展示时，就要将id作为hidden,update或者del再次传入
                  无论时hibernate还是mybatis都要注意主键，一定确定唯一性。而不是再去查，
                  确定唯一记录除了主键 如 user有树据库自增主键，但有usrid ,所以传入userid也行++
                  不过 如mapping表中gid+uid可以确定一条记录，但这里也必须查出来，在删除。。。。。不够灵活。
               merge()   需要接收返回对象，对传入对象状态不做修改，如 user = new User(新)  merge(user) 此时user.getId为null需要将返回值再.getId
          6.no session
             在分层开发中，dao层获取数据，service进行数据业务处理和事务操作(session关闭)，如果使用load()获取数据===数据在第一次访问时才会加载，则会因为
             session的关闭造成无法取到值。
             get()
      *** 7.hibernate中查询语句及执行方法分类及对比
                  1.主键查询   get()  load()   无须写sql 直接User user = (User)session.load(User.class, 1);
                  2.hql        hibernate query langauage  其中没有表，字段概念；由类，对象，属性代替
                          [select 别名/属性
                                         1.(自动封装为object数组  list<object[]>)
                                         2. 属性组成的对象=new(xx,xx)需要定义该构造方法//
                                         3.new Map(name,age)...其中key是0 1.。而不是name.
                                         4. new Map(u.name as name ,u.age as age)起别名后key和value ] 
                          from 类型   必输
                          [where] [group by] [having] [orderby ] [limit]
                                         1.?占位符                      session.creatQuery(hql).setName(0,xx).setAge(1,xx)
                                         2.命名参数 xxxname like :name      session.creatQuery(hql).setName(name,xx).setAge(age,xx)
                                         3.封装为searchBean   
                          ====》工具类实现对  ***条件拼接*** 动态
                         session.createQuery(hql).list()
                         
                         分页    query提供了setFirstResult() hibernte自动生成分页语句 来限定从第几条开始读取 等方法来实现。 bbsp中的   {{Page对象 + 拼接sql来实现分页}}
                         聚合函数
                                 select count(u.id) from User u ; 其他聚合函数
                         子查询 
                         ....
                  3.sql
                          String sql = "xxxxx";
                          SQLQuery query =session.createSqlQuery(sql);
                          query.addEntity(User.class);  -----------   封装搜结果到对象
                  4.critria
                         完全面向对象，提供了很多静态方法来提供条件限制。
                                  session.createCritria(User.class).add(restriction.eq("name","tom"));
                  5.命名查询
                         在xx.hbm.xml中写hql语句
                         
                  6.hibernate4.0对jdbc支持
                         dowork() - executeUpdate() -.....
      *** 8.关联关系
                对象间多种关系。关联关系分为：
                  1.一对一 
                  2.多对一
                  3.一对多
                  4.多对多
                  5.联结查询
      
      
      
      
 ----------------struts-------------------------------------
 问题:哪里使用转发？转发是否可以保留数据？
      如何使用session ，表单提交是否数据+回显就数据是否可以先放到session中
      域概念   哪些属性对象可以跨域 ，哪些是不能的?
      
      
------------
 
      
---------------------      
      
      
      
      
